---
updated: 18 July 2024
author: Lyndon Lim
---

# Overview
This file contains the Beanie document types used to interacting with the DB.

> **_NOTE:_** In Beanie, a Link is a special field type used to create a reference between two document types in a MongoDB database. It allows for the establishment of relationships between documents, similar to foreign keys in relational databases.

### Group Document
```python
class GroupDocument(Document):
    name: str
    articles: List[Link["ArticleDocument"]]
    job: Link["JobDocument"] = None
```
Description: A Group refers to a cluster of similar articles.

Class variables:
- `name`: The name of the group.
- `articles`: A list of articles that belong to the group.
- `job`: The **latest** job associated with the group.


### Job Document
```python
class JobDocument(Document):
    group: Link[GroupDocument]
    created_at: str
    remove_articles: List[Link["JobRemoveDocument"]] = Field(default=[])
    ignore_articles: List[Link["JobIgnoreDocument"]] = Field(default=[])
    optimise_articles: List[Link["JobOptimiseDocument"]] = Field(default=[])
    combine_articles: List[Link["JobCombineDocument"]] = Field(default=[])
```

Description: A Job refers to a task that is performed on a group of articles. It stores the actions (Combine,Ignore,Optimise,Combine) to be performed on the articles in the group.

Class variables:
- `group`: The group that the job is associated with.
- `created_at`: The timestamp when the job was created.
- `remove_articles`: A list of articles to be removed from the group.
- `ignore_articles`: A list of articles to be ignored in the group.
- `optimise_articles`: A list of articles to be optimised in the group.
- `combine_articles`: A list of articles to be combined in the group.


### Article Document
```python
class ArticleDocument(Document):
    id: str
    title: str
    description: str
    pr_name: Indexed(str)
    content_category: Indexed(str)
    url: Indexed(str)
    date_modified: str
    keywords: List[str]
    labels: List[str]
    cover_image_url: str
    engagement_rate: float
    number_of_views: int
    content: str
```

Description: An Article refers to a single piece of content from a website. It contains metadata such as title, description, and content.

Class variables:
- `id`: The unique identifier of the article.
- `title`: The title of the article.
- `description`: A brief description of the article. Also known as meta description
- `pr_name`: The name of the content contributor that the article belongs to.
- `content_category`: The category/content pillar of the content.
- `url`: The URL of the article.
- `date_modified`: The date when the article was last modified.
- `keywords`: A list of keywords associated with the article. Keywords are given by the client
- `labels`: A list of labels associated with the article. Labels are generated through keyword extraction
- `cover_image_url`: The URL of the cover image of the article.
- `engagement_rate`: The engagement rate (%) of the article.
- `number_of_views`: The number of views of the article.
- `content`: The content of the article.

### GeneratedArticle Document
```python
class GeneratedArticleDocument(Document):
    id: Optional[PydanticObjectId] = Field(None, alias="_id")
    title: str
    description: str
    pr_name: Indexed(str)
    status: str = Field(default="")
    content_category: Indexed(str)
    url: Indexed(str)
    date_modified: str
    keywords: List[str]
    labels: List[str]
    cover_image_url: str
    approved: bool = Field(default=False)
```

Description: A GeneratedArticle refers to an article that is generated by combining multiple articles. It contains metadata such as title, description, and content.

Class variables:
- `id`: The unique identifier of the generated article.
- `title`: The title of the generated article.
- `description`: A brief description of the generated article.
- `pr_name`: The name of the content contributor that the generated article belongs to.
- content_category: The category/content pillar of the content.
- `url`: The URL of the generated article.
- `status`: The publication status of the article.
- `date_modified`: The date when the generated article was last modified.
- `keywords`: A list of keywords associated with the generated article. Keywords are given by the client
- `labels`: A list of labels associated with the generated article. Labels are generated through keyword extraction
- `cover_image_url`: The URL of the cover image of the generated article.
- `approved`: A boolean flag indicating whether the generated article is approved for publication.

### Edge Document

```python
class EdgeDocument(Document):
    start: Link[ArticleDocument]
    end: Link[ArticleDocument]
    weight: float = Field(default=-1.0)

    class settings:
        indexes = [
            {"fields": ["start"], "unique": False},
            {"fields": ["end"], "unique": False},
        ]
```

Class variables:
- `start`: The starting article of the edge.
- `end`: The ending article of the edge.
- `weight`: The weight of the edge. A higher weight indicates that two articles are more similar.
- settings
    - `indexes`: Indexes for the start and end fields to improve query performance.


### Job Combine Document
```python
class JobCombineDocument(Document):
    group: Link[GroupDocument]
    sub_group_name: str
    remarks: str
    context: str
    original_articles: List[Link[ArticleDocument]] = Field(default=[])
    generated_article: Optional[Link[GeneratedArticleDocument]] = None
```

Description: A JobCombine refers to a task that combines multiple articles from a subgroup in `Group` into a single article. 

Class variables:
- `group`: The group that the job is associated with.
- `sub_group_name`: The name of the subgroup to be combined.
- `remarks`: Remarks or notes associated with the job combine.
- `context`: Context given by the user to add on to the harmonisation process.
- `original_articles`: A list of articles to be combined into a subgroup.
- `generated_article`: The generated article from the combination process.

### Job Optimise Document
```python
class JobOptimiseDocument(Document):
    original_article: Link[ArticleDocument]
    generated_article: Optional[Link[GeneratedArticleDocument]] = None
    optimise_title: bool
    title_remarks: str
    optimise_meta: bool
    meta_remarks: str
    optimise_content: bool
    content_remarks: str

```

Class variables:
- `original_article`: The original article to be optimised.
- `generated_article`: The generated article after optimisation.
- `optimise_title`: A boolean flag indicating whether to optimise the title.
- `title_remarks`: Remarks on the title optimisation.
- `optimise_meta`: A boolean flag indicating whether to optimise the meta description.
- `meta_remarks`: Remarks on the meta description optimisation.
- `optimise_content`: A boolean flag indicating whether to optimise the content.
- `content_remarks`: Remarks on the content optimisation.



### Job Ignore Document
```python
class JobIgnoreDocument(Document):
    article: Link[ArticleDocument]
    remarks: str = Field(default="")
```

Class variables:
- `article`: The article to be ignored.
- `remarks`: Remarks on why the article is being ignored.


### Job Remove Document
```python
class JobRemoveDocument(Document):
    article: Link[ArticleDocument]
    remarks: str = Field(default="")
```

Class variables:
- `article`: The article to be removed.
- `remarks`: Remarks on why the article is being removed.

